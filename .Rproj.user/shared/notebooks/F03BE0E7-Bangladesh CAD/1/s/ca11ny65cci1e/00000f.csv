"0","library(scales)"
"0","library(epiR)"
"0","library(ggplot2)"
"0","# library(ggthemes)"
"0","library(RColorBrewer)"
"0","library(plyr)"
"0","library(reshape2)"
"0","# library(reshape)"
"0",""
"0","Xpert.cost = 10.3"
"0","Radiologist.cost = 0.5"
"0","CAD.cost = 1.00"
"0",""
"0",""
"0","Master_df <- read.table(file = ""C:/Users/zhizh/OneDrive - Stop TB Partnership/UNOPS/10 Paper Writing/CAR software/02 Bangladesh/2016 Analysis/CXR and valid GXP_original.csv"", header=T, sep="","")"
"0","Master_df <- Master_df[, c(1:13)]"
"0",""
"0","Master_df$type[Master_df$Refferal.Unit ==""CS""|Master_df$Refferal.Unit ==""cs""|Master_df$Refferal.Unit ==""CS "" | Master_df$Refferal.Unit ==""PP""| Master_df$Refferal.Unit ==""pp""| Master_df$Refferal.Unit ==""Pp""] <- ""Private Provider"""
"0","Master_df$type[Master_df$Refferal.Unit ==""DOTS""|Master_df$Refferal.Unit ==""Dots""|Master_df$Refferal.Unit ==""DOTs""] <- ""Public DOTS Facilities"""
"0","Master_df$type[Master_df$Refferal.Unit ==""Self""|Master_df$Refferal.Unit ==""SELF""|Master_df$Refferal.Unit ==""SElF""|Master_df$Refferal.Unit ==""Self ""|Master_df$Refferal.Unit ==""self""] <- ""Walk-in"""
"0","Master_df$type <- as.factor(Master_df$type)"
"0",""
"0","Master_df_V5 <- read.table(file = ""C:/Users/zhizh/OneDrive - Stop TB Partnership/UNOPS/10 Paper Writing/CAR software/02 Bangladesh/2016 Analysis/CXR and valid GXP_original - V5.csv"", sep = "","", header = T, fill = T)"
"0","V5_only <- read.table(file = ""C:/Users/zhizh/OneDrive - Stop TB Partnership/UNOPS/10 Paper Writing/CAR software/02 Bangladesh/2016 Analysis/V5 score.csv"", sep = "","", header = T, fill = T)"
"0",""
"0","Master_df$CXR.Score_V5 <- V5_only$CXR.Score.New[match(Master_df$PID, V5_only$Patient.ID)]"
"0","Master_df <- Master_df[complete.cases(Master_df$CXR.Score_V5),]"
"0",""
"0",""
"0",""
"0","Master_df$outcome [Master_df$GXP.Result == ""Positive"" | Master_df$Repeat.Result == ""Positive""] <- ""Positive"""
"0","Master_df$outcome [Master_df$GXP.Result == ""Negative"" | (Master_df$GXP.Result != ""Positive"" & Master_df$Repeat.Result == ""Negative"")] <- ""Negative"""
"0","Master_df$outcome [is.na(Master_df$outcome)==T] <- ""Invalid/Error"""
"0","Master_df$outcome <- as.factor(Master_df$outcome)"
"0","comment(Master_df$outcome) <- ""Combining the first and repeated MTB results"""
"0",""
"0","Master_df$RIF [Master_df$RIF.Result == ""Sensetive"" | Master_df$Repeat.RIF.Result == ""Sensetive""] <- ""Sensetive"""
"0","comment(Master_df$RIF) <- ""Combining the first and repeated RIF results"""
"0","Master_df$RIF [Master_df$RIF.Result == ""Resistance"" | Master_df$Repeat.RIF.Result == ""Resistance""] <- ""Resistance"""
"0","Master_df$RIF [Master_df$RIF.Result == ""Indeterminate"" | Master_df$Repeat.RIF.Result == ""Indeterminate""] <- ""Indeterminate"""
"0","Master_df$RIF <- as.factor(Master_df$RIF)"
"0",""
"0",""
"0","Master_df_valid <- subset(Master_df, Master_df$outcome != ""Invalid/Error"")"
"0",""
"0","Master_df_valid <- subset(Master_df_valid, Master_df_valid$Refferal.Unit != ""Contact Tracing""  & Master_df_valid$Refferal.Unit != ""Screening"" )"
"0",""
"0",""
"0","comment(Master_df_valid) <- ""excluding the invalid and error results (after repeat) & excluding contract tracing and screening, only adults (>15)"""
"0",""
"0","Master_df_valid$outcome_num [Master_df_valid$outcome == ""Positive"" | Master_df_valid$outcome == ""Positive""] <- 1"
"0",""
"0","Master_df_valid$outcome_num [Master_df_valid$outcome == ""Negative"" | Master_df_valid$outcome == ""Negative""] <- 0"
"0",""
"0","Master_df_valid$outcome_num <- as.numeric(Master_df_valid$outcome_num)"
"0","comment(Master_df_valid$outcome_num) <- ""1/0 binary code"""
"0",""
"0","Master_df_valid$radiology_dic [Master_df_valid$RadioLogy.Repot == ""Highly TB Suggestive"" | Master_df_valid$RadioLogy.Repot ==""TB Possible Signs""] <- ""Ragiologist: Abnormal"""
"0","Master_df_valid$radiology_dic [Master_df_valid$RadioLogy.Repot == ""Non-TB Abnormality"" | Master_df_valid$RadioLogy.Repot ==""X- Ray Normal""] <- ""Ragiologist: Normal"""
"0","Master_df_valid$CAD_dic [Master_df_valid$CXR.Score <80] <- ""low CAD score (<80)"""
"0","Master_df_valid$CAD_dic [Master_df_valid$CXR.Score >=80] <- ""high CAD score (>=80)"""
"0",""
"0","ggplot(Master_df_valid, aes(Age, fill=type)) + geom_histogram(binwidth = 1)"
